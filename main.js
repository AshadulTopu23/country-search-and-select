/*  COUNTRY LIST ARRAY Object */
const countryList=[
    {
    flag: './flag/af.png',
    countryName: "Afghanistan",
    checked: false,
},
{
    flag: './flag/al.png',
    countryName: "Albania",
    checked: false,
},
{
    flag: './flag/ad.png',
    countryName: "Algeria",
    checked: false,
},
{
    flag: './flag/am.png',
    countryName: "American",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Antarctica",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Antigua and Barbuda",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Argentina",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Armenia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Australia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Austria",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Azerbaijan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bahamas",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bahrain",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bangladesh",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Belarus",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Belgium",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Belize",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Benin",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bermuda",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bhutan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bonaire",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Brazil",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Bulgaria",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Burundi",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cabo Verde",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cambodia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cameroon",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Canada",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Chad",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Chile",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "China",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Christmas Island",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Colombia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Congo",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cook Islands",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Croatia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cuba",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cura√ßao",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Cyprus",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Czechia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Denmark",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Djibouti",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Dominica",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Ecuador",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Egypt",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Ethiopia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Fiji",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Finland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "France",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "French Guiana",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "French Polynesia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Gabon",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Georgia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Germany",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Ghana",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Gibraltar",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Greece",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Greenland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Grenada",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guadeloupe",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guam",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guatemala",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guernsey",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guinea",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guinea-Bissau",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Guyana",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Haiti",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Honduras",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Hong Kong",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Hungary",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Iceland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "India",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Indonesia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Iran",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Iraq",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Ireland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Israel",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Italy",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Jamaica",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Japan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Jersey",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Jordan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Kazakhstan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Kenya",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Kiribati",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Korea (the Democratic People's Republic of)",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Korea (the Republic of)",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Kuwait",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Kyrgyzstan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Latvia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Lebanon",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Lesotho",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Liberia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Libya",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Liechtenstein",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Lithuania",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Luxembourg",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Macao",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Madagascar",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Malawi",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Malaysia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Maldives",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mali",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Malta",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Martinique",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mauritania",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mauritius",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mayotte",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mexico",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Moldova (the Republic of)",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Monaco",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mongolia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Montenegro",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Montserrat",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Morocco",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Mozambique",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Myanmar",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Namibia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Nauru",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Nepal",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Netherlands",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Palestine",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Panama",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Papua New Guinea",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Paraguay",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Peru",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Qatar",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Romania",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Pitcairn",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Poland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Portugal",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Saudi Arabia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Senegal",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Serbia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Slovakia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Singapore",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Slovenia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "South Africa",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Somalia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "South Sudan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Spain",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Sri Lanka",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Sudan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Sweden",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Switzerland",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Taiwan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Tajikistan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Tanzania",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Thailand",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Turkey",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Turkmenistan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Uganda",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Ukraine",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "United Arab Emirates",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Uruguay",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Uzbekistan",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Venezuela",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Viet Nam",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Virgin Islands (British)",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Virgin Islands (U.S.)",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Western Sahara",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Yemen",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Zambia",
    checked: false,
},
{
    flag: './flag/af.png',
    countryName: "Zimbabwe",
    checked: false,
},
]

/*  
  - GENERATE <li> list items based on array values  
  - GENERATE <button> filter elements based on first letter of the same array values 
*/
 
const listElem = document.querySelector('.country-list');
// const filtersContainer = document.querySelector('.filters-letter');

countryList.forEach(cntry => {
    // console.log(cntry);
  let newLi = document.createElement('li');
  let Span = document.createElement('span');
  let Img = document.createElement('img');
//   let src = document.createAttribute('src');
//   let alt = document.createAttribute('alt');
  let Input = document.createElement('input');
//   let Type = document.createAttribute('type');
//   let Name = document.createAttribute('name');
let div = document.createElement('div');
  newLi.append(div, Input);
//   src.value = `${cntry.flag}`
//   alt.value = `${cntry.countryName}`
  Img.setAttribute('src' , `${cntry.flag}`)
  Img.setAttribute('alt' , `${cntry.countryName}`)
  Span.append(`${cntry.countryName}`)
//   Type.value = 'radio'
//   Name.value = 'country'
  Input.setAttribute('type', 'radio')
  Input.setAttribute('name', 'country')
  Input.setAttribute('value', `${cntry.countryName}`)

//   let newA        = document.createElement('a');
//   let newAttrHref = document.createAttribute('href');
//   let newLinkTxt  = document.createTextNode(`${cntry}`);
//   newAttrHref.value = '#';
//   newA.setAttributeNode(newAttrHref);
//   newA.appendChild(newLinkTxt);
//   newLi.appendChild(newA);
div.append(Img , Span)
  listElem.appendChild(newLi);  
});

// let getfirstLetters = () => {
//   let arr = [];
//   countryList.forEach(item => {
//     if(arr.indexOf(item[0]) === -1){
//       arr.push(item[0]);  
//     }
//   });
//   return arr;
// };  

// let filterElems = getfirstLetters();

// filterElems.forEach(filter => {
//   let newFilter    = document.createElement('button');
//   let newFilterTxt = document.createTextNode(`${filter}`);
//   newFilter.appendChild(newFilterTxt);  
// //   filtersContainer.appendChild(newFilter);
// });

/*  SEARCH BOX FILTER
- the filter value is the input element's value property
- compare the filter value to the innerText or textContent property of each a-tag
- check if the list item string contains the filter string with indexOf()
- remove case sensitivity with toLowerCase() method
- add or remove the .hide class on the parent <li> element
*/ 
const listItems = document.querySelectorAll('.country-list li'),
      srchBox   = document.querySelector('input');

srchBox.addEventListener('input', function(){
  let filter = this.value.toLowerCase();
  listItems.forEach(item => {
    let itemTxt = (item.innerText || item.textContent).toLowerCase();
    if(itemTxt.indexOf(filter) > -1){
      item.classList.remove('hide');
    } else {item.classList.add('hide');};    
  });
});

listItems.forEach(item => {
    item.addEventListener('click', function(event){
        const radioInput = item.querySelector('input[type="radio"]');
        radioInput.checked = true;
        console.log(radioInput);
    })
})

/*  BUTTON FILTERS  
- add/remove the .active class to the corresponding buttons, using the helper function getSiblings()
- the filter value is innerText if the button element
- compare the filter value to the first letter of the listItem string
- hide/show the corresponding <li> parent elements
- to show-all elements, remove the .hide class on the <li>'s and remove any .active class on the filter bts.
*/

// const filterBtns = document.querySelectorAll('.filters-letter button'),
    //   showAllBtn = document.querySelector('#show-all');

// filterBtns.forEach(btn => {
//   btn.addEventListener('click', function(){
//     this.classList.add('active');
//     let otherBtns = getSiblings(this);
//     otherBtns.forEach(otherBtn => {
//       otherBtn.classList.remove('active');
//     })
//     let filter = (btn.innerText || btn.textContent);
//     listItems.forEach(item => {
//       let itemTxt = item.innerText || item.textContent;
//       if(itemTxt[0] === filter){
//         item.parentNode.classList.remove('hide');        
//       } else {item.parentNode.classList.add('hide');};
//     });
//   });
// });

/* SHOW ALL
- account for filters that may have been applied, remove .hide class
- the order may have been modified by AZ sorting button, sort the arr again and reinsert the items in the ul
- remove active class on filter buttons
*/
// showAllBtn.addEventListener('click', function(){
//   let currentItems = document.querySelectorAll('ul.country-list li a');
//   let currentArr = Array.from(currentItems);
//   currentArr.forEach(item => {
//     item.parentNode.classList.remove('hide');
//   });
//   let sortedArr = currentArr.sort((a, b) => b.innerText.localeCompare(a.innerText));
//   for(var i=0; i < sortedArr.length; i++){
//     listElem.insertBefore(sortedArr[i].parentNode, listElem.firstChild);
//   };
//   filterBtns.forEach(btn => {
//     btn.classList.remove('active');
//   });
// });

// const getSiblings = (elem) => {
//   let siblings = [];
// 	let sibling = elem.parentNode.firstChild;
  
//  	while (sibling) {
// 		if (sibling.nodeType === 1 && sibling !== elem) {
// 			siblings.push(sibling);
// 		}
//    	 	sibling = sibling.nextSibling;
// 	}
// 	return siblings;
// };

/*  SORT A-Z BUTTON
- the sorting should happen on the list of elements that visible, the hidden elements are excluded.
- the resulting NodeList should be transformed to real array to apply the sort() method
- the sort function: parse each a-tag-text into a number
- two elements (a, b) are compared at a time which results in either -1, 0 or 1
- at -1: sort a to an index lower than b
- at 0:  leave a and b unchanged with respect to each other, but sorted with respect to all different elements.
- at 1: sort a to an index higher than b
- the newly sorted list is inserted one by one before the firstChild of the <ul>
*/

// const sortBtn = document.querySelector('#sort');

// sortBtn.addEventListener('click', function(){
//   let currentList = document.querySelectorAll('ul.country-list li:not(.hide) a');
//   let currentListArr = Array.from(currentList);
//   let sortedArr = currentListArr.sort(function(a, b){
//     let aa = parseInt(a.innerText);
//     var bb = parseInt(b.innerText);
//     return aa > bb ? -1 : (aa < bb ? 1 : 0);
//   });
//   for(var i=0; i < sortedArr.length; i++){
//     listElem.insertBefore(sortedArr[i].parentNode, listElem.firstChild);
//   }
// });
